(this["webpackJsonptest-app"]=this["webpackJsonptest-app"]||[]).push([[0],{175:function(e,t,n){},288:function(e,t,n){},289:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n(27),s=n.n(c),u=(n(175),n(26)),o=n(293),i=n(67),j=n(295),l=n(297),f=n(51),b=function(e){return{required:!0,message:e}},d=n(47),h=n(29),O=n.n(h),p=n(49);!function(e){e.SET_AUTH="SET_AUTH",e.SET_ERROR="SET_ERROR",e.SET_USER="SET_USER",e.SET_IS_LOADING="SET_IS_LOADING"}(r||(r={}));var g,v=n(96),m=n.n(v),x={setUser:function(e){return{type:r.SET_USER,payload:e}},setIsAuth:function(e){return{type:r.SET_AUTH,payload:e}},setIsLoading:function(e){return{type:r.SET_IS_LOADING,payload:e}},setError:function(e){return{type:r.SET_ERROR,payload:e}},login:function(e,t){return function(){var t=Object(p.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(x.setIsLoading(!0)),setTimeout(Object(p.a)(O.a.mark((function t(){var r,a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("./users.json");case 2:r=t.sent,(a=r.data.find((function(t){return t.username===e})))?(localStorage.setItem("auth","true"),localStorage.setItem("username",a.username),n(x.setUser(a)),n(x.setIsAuth(!0))):n(x.setError("Wrong Login or Password")),n(x.setIsLoading(!1));case 6:case"end":return t.stop()}}),t)}))),1e3)}catch(r){n(x.setError("Error appeared during login"))}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(p.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(x.setIsAuth(!1));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},E=d.c,S=n(7),y=function(){var e=Object(d.b)(),t=E((function(e){return e.auth})),n=t.error,r=t.isLoading,c=Object(a.useState)(""),s=Object(i.a)(c,2),u=s[0],o=s[1],h=Object(a.useState)(""),O=Object(i.a)(h,2),p=O[0],g=O[1];return Object(S.jsxs)("div",{className:"formWrapper",children:[n&&Object(S.jsx)("div",{style:{color:"red"},children:n}),Object(S.jsxs)(j.a,{onFinish:function(){e(x.login(u,p))},children:[Object(S.jsx)(j.a.Item,{label:"Username",name:"username",rules:[b("Please input your name here")],children:Object(S.jsx)(l.a,{value:u,onChange:function(e){return o(e.target.value)}})}),Object(S.jsx)(j.a.Item,{label:"Password",name:"password",rules:[b("Enter your password")],children:Object(S.jsx)(l.a.Password,{value:p,onChange:function(e){return g(e.target.value)}})}),Object(S.jsx)(j.a.Item,{wrapperCol:{offset:8,span:16},children:Object(S.jsx)(f.a,{type:"primary",htmlType:"submit",loading:r,children:"Submit"})})]})]})},T=function(){return Object(S.jsx)("div",{children:Object(S.jsx)(o.a,{justify:"center",align:"middle",className:"h100",children:Object(S.jsx)(y,{})})})},I=n(294),_=n(299),w=n(298),L=function(e){var t=e.getFullYear(),n=e.getMonth()<10?"0".concat(e.getMonth()+1):e.getMonth(),r=e.getDate()<10?"0".concat(e.getDate()):e.getDate();return"".concat(t,".").concat(n,".").concat(r)},A=function(e){return Object(S.jsx)(w.a,{dateCellRender:function(t){var n=L(t.toDate()),r=e.events.filter((function(e){return e.date===n}));return Object(S.jsx)("div",{children:r.map((function(e,t){return Object(S.jsx)("div",{children:e.description},t)}))})}})},U=n(23),N=n(296),R=n(133),C=function(e){var t=Object(a.useState)({author:"",date:"",description:"",guest:""}),n=Object(i.a)(t,2),r=n[0],c=n[1],s=E((function(e){return e.auth})).user;return Object(S.jsxs)(j.a,{onFinish:function(){e.submit(Object(U.a)(Object(U.a)({},r),{},{author:s.username}))},children:[Object(S.jsx)(j.a.Item,{label:"Description of the event",name:"username",rules:[b("Please input your name here")],children:Object(S.jsx)(l.a,{onChange:function(e){return c(Object(U.a)(Object(U.a)({},r),{},{description:e.target.value}))}})}),Object(S.jsx)(j.a.Item,{children:Object(S.jsx)(o.a,{justify:"end",children:Object(S.jsx)(N.a,{onChange:function(e){return function(e){e&&c(Object(U.a)(Object(U.a)({},r),{},{date:L(e.toDate())}))}(e)},name:"Event Date"})})}),Object(S.jsx)(j.a.Item,{children:Object(S.jsx)(o.a,{justify:"end",children:Object(S.jsx)(R.a,{onChange:function(e){return c(Object(U.a)(Object(U.a)({},r),{},{guest:e}))},children:e.guests.map((function(e){return Object(S.jsx)(R.a.Option,{value:e.username,children:e.username},e.password)}))})})}),Object(S.jsx)(j.a.Item,{wrapperCol:{offset:8,span:16},children:Object(S.jsx)(o.a,{justify:"end",children:Object(S.jsx)(f.a,{type:"primary",htmlType:"submit",children:"Create"})})})]})};!function(e){e.SET_GUESTS="SET_GUESTS",e.SET_EVENTS="SET_EVENTS"}(g||(g={}));var k,G=n(161),D=n(162),F=function(){function e(){Object(G.a)(this,e)}return Object(D.a)(e,null,[{key:"getUsers",value:function(){var e=Object(p.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.a.get("./users.json"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),P={setGuests:function(e){return{type:g.SET_GUESTS,payload:e}},setEvents:function(e){return{type:g.SET_EVENTS,payload:e}},fetchGuests:function(){return function(){var e=Object(p.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.getUsers();case 3:n=e.sent,t(P.setGuests(n.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},createEvent:function(e){return function(){var t=Object(p.a)(O.a.mark((function t(n){var r,a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r=localStorage.getItem("events")||"[]",(a=JSON.parse(r)).push(e),n(P.setEvents(a)),localStorage.setItem("events",JSON.stringify(a))}catch(c){console.log(c)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},fetchEvents:function(e){return function(){var t=Object(p.a)(O.a.mark((function t(n){var r,a,c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r=localStorage.getItem("events")||"[]",a=JSON.parse(r),c=a.filter((function(t){return t.author===e||t.guest===e})),n(P.setEvents(c))}catch(s){console.log(s)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},V=Object(U.a)(Object(U.a)({},x),P),H=n(81),J=function(){var e=Object(d.b)();return Object(H.b)(V,e)},M=[{path:"/login",exact:!0,component:T}],B=[{path:"/event",exact:!0,component:function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],c=E((function(e){return e.event})),s=c.guests,u=c.events,j=E((function(e){return e.auth})).user,l=J(),b=l.fetchGuests,d=l.createEvent,h=l.fetchEvents;return Object(a.useEffect)((function(){b(),h(j.username)}),[]),Object(S.jsxs)(I.a,{children:[Object(S.jsx)(A,{events:u}),Object(S.jsx)(o.a,{justify:"center",children:Object(S.jsx)(f.a,{onClick:function(){return r(!0)},children:"AddEvent"})}),Object(S.jsx)(_.a,{title:"Add Event",visible:n,footer:null,onCancel:function(){return r(!1)},children:Object(S.jsx)(C,{guests:s,submit:function(e){return function(e){r(!1),d(e)}(e)}})})]})}}];!function(e){e.LOGIN="/login",e.EVENT="/event"}(k||(k={}));var W=function(){var e=E((function(e){return e.auth})).isAuth;return console.log(e),e?Object(S.jsxs)(u.d,{children:[B.map((function(e){return Object(S.jsx)(u.b,{path:e.path,exact:e.exact,component:e.component},e.path)})),Object(S.jsx)(u.a,{to:k.EVENT})]}):Object(S.jsxs)(u.d,{children:[M.map((function(e){return Object(S.jsx)(u.b,{path:e.path,exact:e.exact,component:e.component},e.path)})),Object(S.jsx)(u.a,{to:k.LOGIN})]})},q=(n(288),n(300)),z=function(){Object(u.g)(),Object(d.b)();var e=E((function(e){return e.auth})).isAuth,t=J().logout;return Object(S.jsx)(I.a.Header,{children:Object(S.jsx)(o.a,{justify:"end",children:Object(S.jsx)(q.a,{theme:"dark",selectable:!1,mode:"horizontal",children:e?Object(S.jsx)(q.a.Item,{onClick:t,children:"Logout"}):Object(S.jsx)(q.a.Item,{children:"Login"})})})})},Y=function(){var e=J(),t=e.setUser,n=e.setIsAuth;return Object(a.useEffect)((function(){localStorage.getItem("auth")&&(t({username:localStorage.getItem("username")}),n(!0))}),[]),Object(S.jsxs)(I.a,{children:[Object(S.jsx)(z,{}),Object(S.jsx)(I.a.Content,{children:Object(S.jsx)(W,{})})]})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,301)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},Q=n(95),X=n(164),Z={isAuth:!1,error:"",isLoading:!1,user:{}};var $={guests:[],events:[]};var ee={auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.SET_AUTH:return Object(U.a)(Object(U.a)({},e),{},{isAuth:t.payload,isLoading:!1});case r.SET_USER:return Object(U.a)(Object(U.a)({},e),{},{user:t.payload});case r.SET_ERROR:return Object(U.a)(Object(U.a)({},e),{},{error:t.payload,isLoading:!1});case r.SET_IS_LOADING:return Object(U.a)(Object(U.a)({},e),{},{isLoading:t.payload});default:return e}},event:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.SET_GUESTS:return Object(U.a)(Object(U.a)({},e),{},{guests:t.payload});case g.SET_EVENTS:return Object(U.a)(Object(U.a)({},e),{},{events:t.payload});default:return e}}},te=Object(H.c)(ee),ne=Object(H.d)(te,Object(H.a)(X.a));s.a.render(Object(S.jsx)(d.a,{store:ne,children:Object(S.jsx)(Q.a,{children:Object(S.jsx)(Y,{})})}),document.getElementById("root")),K()}},[[289,1,2]]]);
//# sourceMappingURL=main.c34b9bbf.chunk.js.map